{% extends "base.html" %}


<html>
	<head>
		<script
  		src="https://code.jquery.com/jquery-3.2.1.js"
  		integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE="
 		crossorigin="anonymous"></script>
 		{% block head %}
 		{% end block %}
	</head>
	<body>
		{% block content %}	
		<div class="row">
			<div class="col s6">
				<ul class="collapsible" data-collapsible="accordion">
					<li>
		    			<div class="collapsible-header"><i class="material-icons">vpn_key</i>Modifica password</div>

		    			<div class="collapsible-body active" id="collapsible_password">
		    				<span>
		    					<form method="POST" action="/account" id="form_psw">
		    						<input type="hidden" name="action" name="password">
				    					<div class="row">
				        					<div class="input-field col s12">
				          						<input id="vecchiaPassword" type="password" class="validate" name="oldpassword">
				         						<label for="password">Vecchia password</label>
				        					</div>
				      					</div>
				      					<div class="row">
				        					<div class="input-field col s12">
				          						<input id="nuovaPassword" type="password" class="validate" name="newpassword">
				         						<label for="password">Nuova password</label>
				        					</div>
				      					</div>
				      					<div class="row">
				        					<div class="input-field col s12">
				          						<input id="confermaPassword" type="password" class="validate">
				         						<label for="password">Conferma password</label>
				        					</div>
				      					</div>
				      					<div class="row">
				      						<div class col="s12">
												<div class="error" style="display:none" id="error">
												   	
												</div>
					      					</div>
				      					</div>
				      					<div class="row">
				      						<button id="psw" class="btn waves-effect waves-light light-blue darken-3" type="button" name="action">Modifica</button>
				      					</div>
			      				</form>
		      				</span>
		      			</div>
		   		 	</li>
		  		 	<li>
		    			<div class="collapsible-header"><i class="material-icons">account_circle</i>Modifica email</div>

		    			<div class="collapsible-body">
		    				<span>
		    					<form method="POST" action="/account" id="form_email">
		    						<input type="hidden" name="action" name="email">
				    					<div class="row">
				        					<div class="input-field col s12">
				          						<input id="vecchiaEmail" type="text" class="validate" name="oldemail">
				         						<label for="email">Vecchia email</label>
				        					</div>
				      					</div>
				      					<div class="row">
				        					<div class="input-field col s12">
				          						<input id="nuovaEmail" type="text" class="validate" name="newemail">
				         						<label for="email">Nuova email</label>
				        					</div>
				      					</div>
				      					<div class="row">
				        					<div class="input-field col s12">
				          						<input id="confermaEmail" type="text" class="validate">
				         						<label for="email">Conferma email</label>
				        					</div>
				      					</div>
				      					<div class="row">
				      						<div class col="s12">
												<div class="errore" style="display:none" id="errore">
												   	
												</div>
					      					</div>
				      					</div>
				      					<div class="row">
				      						<button id="email" class="btn waves-effect waves-light light-blue darken-3" type="button" name="action">Modifica</button>
				      					</div>
				      			</form>
		      				</span>
		      			</div>
		    		</li>
				</ul>
			</div>
		</div>
		{% endblock %}
		<script type="text/javascript">
		$(document).ready(function(){
			$(".collapsible-header").addClass("active");
		    $("#psw").click(function(){
					if ($('#nuovaPassword').val() == $('#confermaPassword').val()) {
				     	$('.error').html("");
				     	$( "#form_psw" ).submit();
				    	error = true;
				    } else if ($('#nuovaPassword').val() != $('#confermaPassword').val()) {

				     	$('.error').html("<blockquote> <h5>Errore</h5> Password incongruenti </blockquote>");
				     	$("#error").css("display", "inline");
				     	error = true;
				    }
		    });
		    $("#email").click(function(){
		        if ($('#nuovaEmail').val() == $('#confermaEmail').val()) {
				     	$('.errore').html("");
				     	$( "#form_email" ).submit();
				    	errore = true;
				    } else if ($('#nuovaEmail').val() != $('#confermaEmail').val()) {
				     	$('.errore').html("<blockquote> <h5>Errore</h5> Email incongruenti </blockquote>");
				     	$("#errore").css("display", "inline");
				     	errore = true;
				    }
		    });
		});
		 
        
		</script>

		{% if success == "password" %}
		<script type="text/javascript">
		$('#collapsible_password').collapsible('open', 0);
		</script>
		{% elif success == "email" %}

		{% andif %}
	</body>

</html>