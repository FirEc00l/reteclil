<!--
### 
### Responsabile: Alemanni
### Ultima modifica di: Alemanni 22/05
###
-->

{% extends "base.html" %}

{% block content %}
<title>Rete CLIL - Forum</title>
<style>

  .Abbrevia {
    -o-text-overflow: ellipsis;   /* Opera */
    text-overflow:    ellipsis;   /* IE, Safari (WebKit) */
    overflow:hidden;              /* don't show excess chars */
    white-space:nowrap;           /* force single line */
  }
</style>

  <script>
    $(document).ready(function(){
      $('.modalfor').modal({
          dismissible: true, // Modal can be dismissed by clicking outside of the modal
          opacity: .5, // Opacity of modal background
          inDuration: 300, // Transition in duration
          outDuration: 200, // Transition out duration
          startingTop: '4%', // Starting top style attribute
          endingTop: '10%', // Ending top style attribute
        });
      $('.ShowButton').modal();
      $("#search_key").bind("enterKey",function(e){
        if($("#search_key").is(':valid')){
          a=$("#search_key").val(); // Prende il valore da search
          $(location).attr('href', '/search/'+a); // Lo mette nella URL
        }
      });
      $("#search_key").keyup(function(e){ // "Quando premi enter si attiva l'evento enter [Non saprei come spiegarlo meglio..]"
        if(e.keyCode == 13){
               $(this).trigger("enterKey");
        }
      });
      $('.btn-floating').each(function(){
          $(this).click(function(){
              $('modalfor'+$(this).attr('name')).modal("open");
          });
      });
    });         
  </script>
<br>
<br>
<h2 align="center">Forum</h2>
<br>
{% if discussion %}
<div class="input-field col s6 offset-m3">
	<ul class="collection">
    <!--da fixare nomi da jinja nome cognome titolo (togliere ultimo post)-->

    {% for discussion in discussions %}
    <a href="/forum/{{sub_forum[1]}}">
      <li class="collection-item avatar">
        <i class="material-icons circle blue">question_answer</i>
        <span class="title Abbrevia">{{discussion.title}}</span>
        <p class="Abbrevia">{{discussion.arguments}}
        </p>
      </a>
      <!--da rendere hidden -->
      <a href="#!" class="secondary-content"><i class="material-icons">delete</i></a>
    </li>
    {% endfor %}
  </ul>

  {% else %}
  <!--da vedere row e dimensione in col-->
  <div class="row" >
    <div class="col m4 offset-m4"><p align="center">Attualmente non sono presenti discussioni.Puo crearne una nuova premento sul tasto dal simbolo "+" in basso a sinistra</p></div>
  </div>
  {% endif %}
  <!-- Modal Trigger -->
  <a class="ShowButton btn-floating btn-large waves-effect waves-light blue modal-trigger" href="#modal1"><i class="material-icons">add</i></a>
  <!-- Modal Structure -->
  <div id="modal1" class="modal">
    <div class="modal-content">
      <h4>Modal Header</h4>
      <p>A bunch of text</p>
    </div>
    <div class="modal-footer">
      <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Agree</a>
    </div>
  </div>
</div>
{% endblock %}

